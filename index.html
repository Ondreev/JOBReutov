<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>–†–∞–±–æ—Ç–∞ –≤ –†–µ—É—Ç–æ–≤–µ</title>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU"></script>
    <style>
      html, body, #map {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      const vacancies = [
        {
          title: '–ü–æ–≤–∞—Ä',
          salary: 4500,
          desc: '–ú–æ–∂–Ω–æ –±–µ–∑ –æ–ø—ã—Ç–∞ –∏–ª–∏ —Å –Ω–µ–±–æ–ª—å—à–∏–º –æ–ø—ã—Ç–æ–º. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –º–µ–¥–∫–Ω–∏–∂–∫–∞.',
          address: '–†–µ—É—Ç–æ–≤, –ö–∞–ª–∏–Ω–∏–Ω–∞ 8',
          restaurant: '–°–∞–∫—É—Ä–∞',
          contact: '+79099009271'
        },
        {
          title: '–ö—É—Ä—å–µ—Ä',
          salary: 6000,
          desc: '–ù–∞ –∞–≤—Ç–æ. –ë–µ–∑ –æ–ø—ã—Ç–∞. 5‚Äì6 —á/–¥–µ–Ω—å. –î–æ—Å—Ç–∞–≤–∫–∞ –µ–¥—ã.',
          address: '–†–µ—É—Ç–æ–≤, –õ–µ–Ω–∏–Ω–∞ 15',
          restaurant: '–°—É—à–∏–í–æ–∫',
          contact: '+74951400557'
        }
      ];

      ymaps.ready(function () {
        const map = new ymaps.Map("map", {
          center: [55.759, 37.863],
          zoom: 15,
          controls: ['zoomControl']
        });

        vacancies.forEach(async ({ title, salary, desc, address, contact, restaurant }) => {
          try {
            const res = await ymaps.geocode(address);
            const coords = res.geoObjects.get(0).geometry.getCoordinates();

            const caption = `${salary}‚ÇΩ\n${title}`;
            const balloon = `
              <strong>${title}</strong><br/>
              ${restaurant} (${address})<br/>
              <em>${desc}</em><br/>
              <div style="margin-top: 6px">
                <a href='https://wa.me/${contact.replace('+', '')}' target='_blank'>
                  üì≤ –°–≤—è–∑–∞—Ç—å—Å—è –≤ WhatsApp
                </a>
              </div>
            `;

            const placemark = new ymaps.Placemark(coords, {
              hintContent: `${salary}‚ÇΩ/–¥–µ–Ω—å`,
              iconCaption: caption,
              balloonContent: balloon
            }, {
              preset: 'islands#yellowCircleIconWithCaption'
            });

            map.geoObjects.add(placemark);
          } catch (err) {
            console.error(`–û—à–∏–±–∫–∞ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è: ${address}`, err);
          }
        });
      });
    </script>
  </body>
</html>
